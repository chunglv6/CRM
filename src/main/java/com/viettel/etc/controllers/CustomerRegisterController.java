package com.viettel.etc.controllers;import com.viettel.etc.dto.ServiceRegisterDTO;import com.viettel.etc.dto.viettelpost.*;import com.viettel.etc.services.ServiceRegistryService;import com.viettel.etc.utils.Constants;import com.viettel.etc.xlibrary.core.constants.FunctionCommon;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.http.HttpStatus;import org.springframework.http.MediaType;import org.springframework.http.ResponseEntity;import org.springframework.security.core.Authentication;import org.springframework.security.core.annotation.AuthenticationPrincipal;import org.springframework.web.bind.annotation.*;import javax.servlet.http.HttpServletRequest;import javax.validation.Valid;import java.io.IOException;/** * Autogen class: Lop dich vu * * @author ToolGen * @date Fri Jul 10 09:53:01 ICT 2020 */@RestController@RequestMapping(Constants.REQUEST_MAPPING_V1)public class CustomerRegisterController {    @Autowired    private ServiceRegistryService serviceRegistryService;    /**     * Dang ky dich vu     *     * @param dataParams params client     * @return     */    @PostMapping(value = Constants.MOBILE + "/register", produces = MediaType.APPLICATION_JSON_VALUE)    public ResponseEntity<Object> register(@Valid @RequestBody ServiceRegisterDTO dataParams,                                           HttpServletRequest request) {        BillResponseDTO resultObj = serviceRegistryService.register(dataParams, request.getRemoteAddr());        return new ResponseEntity<>(FunctionCommon.responseToClient(resultObj), HttpStatus.valueOf(resultObj.getStatus()));    }    /**     * Lay danh sach tinh thanh pho     */    @GetMapping(value = "/categories/provinces", produces = MediaType.APPLICATION_JSON_VALUE)    public ResponseEntity<Object> getListProvinceById(@RequestParam Long provinceId) {        ProvinceDTO resultObj = (ProvinceDTO) serviceRegistryService.getListProvinceById(provinceId);        HttpStatus httpStatus = HttpStatus.INTERNAL_SERVER_ERROR;        if (resultObj != null) {            httpStatus = HttpStatus.valueOf(resultObj.getStatus());        }        return new ResponseEntity<>(resultObj, httpStatus);    }    /**     * Lay danh sach quan huyen     */    @GetMapping(value = "/categories/districts", produces = MediaType.APPLICATION_JSON_VALUE)    public ResponseEntity<Object> getListDistrict(@RequestParam Long provinceId) {        DistrictDTO resultObj = (DistrictDTO) serviceRegistryService.getListDistrict(provinceId);        HttpStatus httpStatus = HttpStatus.INTERNAL_SERVER_ERROR;        if (resultObj != null) {            httpStatus = HttpStatus.valueOf(resultObj.getStatus());        }        return new ResponseEntity<>(resultObj, httpStatus);    }    /**     * Lay danh sach xa phuong     */    @GetMapping(value = "/categories/wards", produces = MediaType.APPLICATION_JSON_VALUE)    public ResponseEntity<Object> getListWards(@RequestParam Long districtId) {        WardsDTO resultObj = (WardsDTO) serviceRegistryService.getListWards(districtId);        HttpStatus httpStatus = HttpStatus.INTERNAL_SERVER_ERROR;        if (resultObj != null) {            httpStatus = HttpStatus.valueOf(resultObj.getStatus());        }        return new ResponseEntity<>(resultObj, httpStatus);    }    /**     * Lay danh sach cua hang     */    @GetMapping(value = "/categories/shops", produces = MediaType.APPLICATION_JSON_VALUE)    public ResponseEntity<Object> getListShop() throws IOException {        ShopDTO resultObj = (ShopDTO) serviceRegistryService.getListShop();        HttpStatus httpStatus = HttpStatus.INTERNAL_SERVER_ERROR;        if (resultObj != null) {            httpStatus = HttpStatus.valueOf(resultObj.getStatus());        }        return new ResponseEntity<>(resultObj, httpStatus);    }    /**     * Lay don dang ky theo orderNumber     */    @GetMapping(value = "/order-number/{orderNumber}", produces = MediaType.APPLICATION_JSON_VALUE)    public ResponseEntity<Object> getByOrderNumber(@AuthenticationPrincipal Authentication authentication,                                                   @PathVariable String orderNumber) throws IOException {        Object resultObj = serviceRegistryService.getByOrderNumber(orderNumber);        return new ResponseEntity<>(FunctionCommon.responseToClient(resultObj), HttpStatus.OK);    }    /**     * Lay phi dan the theo bien so     */    @GetMapping(value = "/fee/add-vehicle/{plateNumber}", produces = MediaType.APPLICATION_JSON_VALUE)    public ResponseEntity<Object> getFeeAddVehicle(@AuthenticationPrincipal Authentication authentication,                                                   @PathVariable String plateNumber,                                                   @RequestParam String plateTypeCode) {        Object resultObj = serviceRegistryService.getFeeAddVehicle(plateNumber, plateTypeCode);        return new ResponseEntity<>(FunctionCommon.responseToClient(resultObj), HttpStatus.OK);    }    /***     * Kiem tra bien so xe     * @throws Exception     */    @GetMapping(value = "/vehicle/activation/check/{plate}", produces = MediaType.APPLICATION_JSON_VALUE)    public ResponseEntity<Object> vehicleCheck(@PathVariable String plate) throws Exception {        Object resultObj = serviceRegistryService.checkVehicle(plate);        return new ResponseEntity<>(FunctionCommon.responseToClient(resultObj), HttpStatus.OK);    }}