package com.viettel.etc.repositories.impl;import com.viettel.etc.dto.SaleTransDelBoo1DTO;import com.viettel.etc.repositories.SaleTransDelBoo1Repository;import com.viettel.etc.xlibrary.core.entities.ResultSelectEntity;import com.viettel.etc.xlibrary.core.repositories.CommonDataBaseRepository;import org.springframework.stereotype.Repository;import java.util.ArrayList;import java.util.List;/** * Autogen class Repository Impl: Lop thao tac huy ve lien thong BOO * * @author ToolGen * @date Sat Oct 03 09:32:15 ICT 2020 */@Repositorypublic class SaleTransDelBoo1RepositoryImpl extends CommonDataBaseRepository implements SaleTransDelBoo1Repository {    /**     * Lay du lieu huy ve     *     * @param itemParamsEntity: params client truyen len     * @return     */    @Override    public ResultSelectEntity getSaleTransDelBoo1(SaleTransDelBoo1DTO itemParamsEntity) {        StringBuilder sql = new StringBuilder();        sql.append("select * from SALE_TRANS_DEL_BOO1 where 1=1");        List<Object> arrParams = new ArrayList<>();        Integer start = null;        if (itemParamsEntity != null && itemParamsEntity.getStartrecord() != null) {            start = itemParamsEntity.getStartrecord();        }        Integer pageSize = null;        if (itemParamsEntity != null && itemParamsEntity.getPagesize() != null) {            pageSize = itemParamsEntity.getPagesize();        }        return getListDataAndCount(sql, arrParams, start, pageSize, SaleTransDelBoo1DTO.class);    }    /**     * Search ticket destroy     *     * @param contractId     * @param saleTransDelBoo1DTO     * @return     */    @Override    public ResultSelectEntity searchTicketDel(Long contractId, SaleTransDelBoo1DTO saleTransDelBoo1DTO) {        StringBuilder sql = new StringBuilder();        List<Object> arrParams = new ArrayList<>();        sql.append(" select \n");        sql.append("    SALE_TRANS_DEL_BOO1_ID                as saleTransDelBoo1Id,           -- \n");        sql.append("    PLATE_NUMBER                          as plateNumber,                  -- Bien so xe\n");        sql.append("    SUBSCRIPTION_TICKET_ID                as subscriptionTicketId,         -- Ma ve thang quy\n");        sql.append("    STATION_ID                            as stationId,                    -- Ma Tram\n");        sql.append("    STAGE_ID                              as stageId,                      -- Ma doan\n");        sql.append("    BOO_CODE                              as booCode,                      -- BOO\n");        sql.append("    SERVICE_PLAN_TYPE_ID                  as servicePlanTypeId,            -- Loai ve\n");        sql.append("    METHOD_CHARGE_ID                      as methodChargeId,               -- Loai PT thu phi\n");        sql.append("    PRICE                                 as price,                        -- Gia ve\n");        sql.append("    CREATE_DATE                           as createDate,                   -- Ngay tao\n");        sql.append("    EFF_DATE                              as effDate,                      -- Ngay bat dau\n");        sql.append("    EXP_DATE                              as expDate,                      -- Ngay ket thuc\n");        sql.append("    STATUS                                as status,                       -- Trang thai yeu cau\n");        sql.append("    BOT_STATUS                            as BOTStatus                     -- Trang thai BOT xac nhan\n");        sql.append(" from SALE_TRANS_DEL_BOO1 WHERE 1=1 \n");        if (contractId != null) {            sql.append(" and CONTRACT_ID = ?\n");            arrParams.add(contractId);        }        sql.append(" and (to_date(sysdate, 'dd/mm/yyyy') BETWEEN TO_DATE(EFF_DATE, 'dd/mm/yyyy') AND TO_DATE(EXP_DATE, 'dd/mm/yyyy')\n");        sql.append(" or to_date(sysdate, 'dd/mm/yyyy') <= TO_DATE(EFF_DATE, 'dd/mm/yyyy')) \n");        sql.append(" ORDER BY CREATE_DATE, STATUS DESC");        Integer start = 0;        if (saleTransDelBoo1DTO != null && saleTransDelBoo1DTO.getStartrecord() != null) {            start = saleTransDelBoo1DTO.getStartrecord();        }        Integer pageSize = null;        if (saleTransDelBoo1DTO != null && saleTransDelBoo1DTO.getPagesize() != null) {            pageSize = saleTransDelBoo1DTO.getPagesize();        }        return getListDataAndCount(sql, arrParams, start, pageSize, SaleTransDelBoo1DTO.class);    }}